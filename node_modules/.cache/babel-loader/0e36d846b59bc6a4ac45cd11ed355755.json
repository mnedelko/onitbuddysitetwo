{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import*as anchor from'@project-serum/anchor';import{TOKEN_PROGRAM_ID}from'@solana/spl-token';import{SystemProgram}from'@solana/web3.js';import{LAMPORTS_PER_SOL,SYSVAR_RENT_PUBKEY,TransactionInstruction}from'@solana/web3.js';export var toDate=function toDate(value){if(!value){return;}return new Date(value.toNumber()*1000);};var numberFormater=new Intl.NumberFormat('en-US',{style:'decimal',minimumFractionDigits:2,maximumFractionDigits:2});export var formatNumber={format:function format(val){if(!val){return'--';}return numberFormater.format(val);},asNumber:function asNumber(val){if(!val){return undefined;}return val.toNumber()/LAMPORTS_PER_SOL;}};export var SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID=new anchor.web3.PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');export var CIVIC=new anchor.web3.PublicKey('gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs');export var getAtaForMint=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(mint,buyer){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return anchor.web3.PublicKey.findProgramAddress([buyer.toBuffer(),TOKEN_PROGRAM_ID.toBuffer(),mint.toBuffer()],SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function getAtaForMint(_x,_x2){return _ref.apply(this,arguments);};}();export var getNetworkExpire=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(gatekeeperNetwork){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return anchor.web3.PublicKey.findProgramAddress([gatekeeperNetwork.toBuffer(),Buffer.from('expire')],CIVIC);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function getNetworkExpire(_x3){return _ref2.apply(this,arguments);};}();export var getNetworkToken=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(wallet,gatekeeperNetwork){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return anchor.web3.PublicKey.findProgramAddress([wallet.toBuffer(),Buffer.from('gateway'),Buffer.from([0,0,0,0,0,0,0,0]),gatekeeperNetwork.toBuffer()],CIVIC);case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function getNetworkToken(_x4,_x5){return _ref3.apply(this,arguments);};}();export function createAssociatedTokenAccountInstruction(associatedTokenAddress,payer,walletAddress,splTokenMintAddress){var keys=[{pubkey:payer,isSigner:true,isWritable:true},{pubkey:associatedTokenAddress,isSigner:false,isWritable:true},{pubkey:walletAddress,isSigner:false,isWritable:false},{pubkey:splTokenMintAddress,isSigner:false,isWritable:false},{pubkey:SystemProgram.programId,isSigner:false,isWritable:false},{pubkey:TOKEN_PROGRAM_ID,isSigner:false,isWritable:false},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}];return new TransactionInstruction({keys:keys,programId:SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,data:Buffer.from([])});}","map":{"version":3,"names":["anchor","TOKEN_PROGRAM_ID","SystemProgram","LAMPORTS_PER_SOL","SYSVAR_RENT_PUBKEY","TransactionInstruction","toDate","value","Date","toNumber","numberFormater","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","formatNumber","format","val","asNumber","undefined","SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID","web3","PublicKey","CIVIC","getAtaForMint","mint","buyer","findProgramAddress","toBuffer","getNetworkExpire","gatekeeperNetwork","Buffer","from","getNetworkToken","wallet","createAssociatedTokenAccountInstruction","associatedTokenAddress","payer","walletAddress","splTokenMintAddress","keys","pubkey","isSigner","isWritable","programId","data"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/src/utility/utils.ts"],"sourcesContent":["import * as anchor from '@project-serum/anchor';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { SystemProgram } from '@solana/web3.js';\nimport {\n  LAMPORTS_PER_SOL,\n  SYSVAR_RENT_PUBKEY,\n  TransactionInstruction,\n} from '@solana/web3.js';\n\nexport interface AlertState {\n  open: boolean;\n  message: string;\n  severity: 'success' | 'info' | 'warning' | 'error' | undefined;\n  hideDuration?: number | null;\n}\n\nexport const toDate = (value?: anchor.BN) => {\n  if (!value) {\n    return;\n  }\n\n  return new Date(value.toNumber() * 1000);\n};\n\nconst numberFormater = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport const formatNumber = {\n  format: (val?: number) => {\n    if (!val) {\n      return '--';\n    }\n\n    return numberFormater.format(val);\n  },\n  asNumber: (val?: anchor.BN) => {\n    if (!val) {\n      return undefined;\n    }\n\n    return val.toNumber() / LAMPORTS_PER_SOL;\n  },\n};\n\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID =\n  new anchor.web3.PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\n\nexport const CIVIC = new anchor.web3.PublicKey(\n  'gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs',\n);\n\nexport const getAtaForMint = async (\n  mint: anchor.web3.PublicKey,\n  buyer: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [buyer.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), mint.toBuffer()],\n    SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  );\n};\n\nexport const getNetworkExpire = async (\n  gatekeeperNetwork: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [gatekeeperNetwork.toBuffer(), Buffer.from('expire')],\n    CIVIC,\n  );\n};\n\nexport const getNetworkToken = async (\n  wallet: anchor.web3.PublicKey,\n  gatekeeperNetwork: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [\n      wallet.toBuffer(),\n      Buffer.from('gateway'),\n      Buffer.from([0, 0, 0, 0, 0, 0, 0, 0]),\n      gatekeeperNetwork.toBuffer(),\n    ],\n    CIVIC,\n  );\n};\n\nexport function createAssociatedTokenAccountInstruction(\n  associatedTokenAddress: anchor.web3.PublicKey,\n  payer: anchor.web3.PublicKey,\n  walletAddress: anchor.web3.PublicKey,\n  splTokenMintAddress: anchor.web3.PublicKey,\n) {\n  const keys = [\n    {\n      pubkey: payer,\n      isSigner: true,\n      isWritable: true,\n    },\n    {\n      pubkey: associatedTokenAddress,\n      isSigner: false,\n      isWritable: true,\n    },\n    {\n      pubkey: walletAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: splTokenMintAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: SystemProgram.programId,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: TOKEN_PROGRAM_ID,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: SYSVAR_RENT_PUBKEY,\n      isSigner: false,\n      isWritable: false,\n    },\n  ];\n  return new TransactionInstruction({\n    keys,\n    programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n    data: Buffer.from([]),\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}