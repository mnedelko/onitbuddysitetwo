{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.statusFromToken = exports.resetState = void 0;\nvar types_1 = require(\"../types\");\n// eslint-disable-next-line import/prefer-default-export\nvar resetState = function resetState(state) {\n  return Object.assign(Object.assign({}, state), {\n    gatewayStatus: types_1.GatewayStatus.UNKNOWN,\n    tokenRequested: false,\n    iframeMinimized: false,\n    firstTokenCheck: true,\n    renderIframe: false,\n    gatewayToken: undefined,\n    powoRequested: undefined,\n    refreshTimeoutId: undefined,\n    powoFinished: false,\n    refreshInProgress: false,\n    tokenIssuanceState: types_1.TokenIssuanceState.NOT_REQUESTED,\n    walletToRefresh: undefined,\n    walletPowoInProgress: false,\n    ownerTransactionConfirmed: false,\n    gatekeeperRecordState: undefined,\n    civicPass: {\n      status: types_1.CivicPassIssuanceStatus.NOT_REQUESTED,\n      iframeMinimized: false,\n      renderIframe: false\n    }\n  });\n};\nexports.resetState = resetState;\nvar hasExpired = function hasExpired(gatewayToken) {\n  var now = Math.floor(Date.now() / 1000);\n  return !!gatewayToken.expiryTime && now >= gatewayToken.expiryTime;\n};\nvar isLocationNotSupported = function isLocationNotSupported(recordState) {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nvar isIssuedLocationNotSupported = function isIssuedLocationNotSupported(recordState) {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.ISSUED_LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nvar isIssuedVpnNotSupported = function isIssuedVpnNotSupported(recordState) {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.ISSUED_VPN_NOT_SUPPORTED].includes(recordState);\n};\nvar isVpnNotSupported = function isVpnNotSupported(recordState) {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.VPN_NOT_SUPPORTED].includes(recordState);\n};\nvar statusFromToken = function statusFromToken(state, gatewayToken) {\n  if (!gatewayToken) return state.gatewayStatus;\n  switch (gatewayToken.state) {\n    case types_1.State.ACTIVE:\n      if (isLocationNotSupported(state.gatekeeperRecordState)) {\n        return types_1.GatewayStatus.LOCATION_NOT_SUPPORTED;\n      }\n      if (isVpnNotSupported(state.gatekeeperRecordState) || isIssuedVpnNotSupported(state.gatekeeperRecordState)) {\n        return types_1.GatewayStatus.VPN_NOT_SUPPORTED;\n      }\n      if (isIssuedLocationNotSupported(state.gatekeeperRecordState)) {\n        return types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED;\n      }\n      if (state.gatewayStatus === types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP) {\n        return types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP;\n      }\n      return hasExpired(gatewayToken) ? types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED : types_1.GatewayStatus.ACTIVE;\n    case types_1.State.REVOKED:\n      return types_1.GatewayStatus.REVOKED;\n    case types_1.State.FROZEN:\n      return types_1.GatewayStatus.FROZEN;\n    default:\n      return types_1.GatewayStatus.UNKNOWN;\n  }\n};\nexports.statusFromToken = statusFromToken;","map":{"version":3,"names":["Object","defineProperty","exports","value","statusFromToken","resetState","types_1","require","state","assign","gatewayStatus","GatewayStatus","UNKNOWN","tokenRequested","iframeMinimized","firstTokenCheck","renderIframe","gatewayToken","undefined","powoRequested","refreshTimeoutId","powoFinished","refreshInProgress","tokenIssuanceState","TokenIssuanceState","NOT_REQUESTED","walletToRefresh","walletPowoInProgress","ownerTransactionConfirmed","gatekeeperRecordState","civicPass","status","CivicPassIssuanceStatus","hasExpired","now","Math","floor","Date","expiryTime","isLocationNotSupported","recordState","GatekeeperAPIStatus","LOCATION_NOT_SUPPORTED","includes","isIssuedLocationNotSupported","ISSUED_LOCATION_NOT_SUPPORTED","isIssuedVpnNotSupported","ISSUED_VPN_NOT_SUPPORTED","isVpnNotSupported","VPN_NOT_SUPPORTED","State","ACTIVE","REFRESH_TOKEN_REQUIRED","PROOF_OF_WALLET_OWNERSHIP","REVOKED","FROZEN"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@civic/common-gateway-react/dist/esm/useReducer/utils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.statusFromToken = exports.resetState = void 0;\nconst types_1 = require(\"../types\");\n// eslint-disable-next-line import/prefer-default-export\nconst resetState = (state) => (Object.assign(Object.assign({}, state), { gatewayStatus: types_1.GatewayStatus.UNKNOWN, tokenRequested: false, iframeMinimized: false, firstTokenCheck: true, renderIframe: false, gatewayToken: undefined, powoRequested: undefined, refreshTimeoutId: undefined, powoFinished: false, refreshInProgress: false, tokenIssuanceState: types_1.TokenIssuanceState.NOT_REQUESTED, walletToRefresh: undefined, walletPowoInProgress: false, ownerTransactionConfirmed: false, gatekeeperRecordState: undefined, civicPass: {\n        status: types_1.CivicPassIssuanceStatus.NOT_REQUESTED,\n        iframeMinimized: false,\n        renderIframe: false,\n    } }));\nexports.resetState = resetState;\nconst hasExpired = (gatewayToken) => {\n    const now = Math.floor(Date.now() / 1000);\n    return !!gatewayToken.expiryTime && now >= gatewayToken.expiryTime;\n};\nconst isLocationNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nconst isIssuedLocationNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.ISSUED_LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nconst isIssuedVpnNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.ISSUED_VPN_NOT_SUPPORTED].includes(recordState);\n};\nconst isVpnNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.VPN_NOT_SUPPORTED].includes(recordState);\n};\nconst statusFromToken = (state, gatewayToken) => {\n    if (!gatewayToken)\n        return state.gatewayStatus;\n    switch (gatewayToken.state) {\n        case types_1.State.ACTIVE:\n            if (isLocationNotSupported(state.gatekeeperRecordState)) {\n                return types_1.GatewayStatus.LOCATION_NOT_SUPPORTED;\n            }\n            if (isVpnNotSupported(state.gatekeeperRecordState) || isIssuedVpnNotSupported(state.gatekeeperRecordState)) {\n                return types_1.GatewayStatus.VPN_NOT_SUPPORTED;\n            }\n            if (isIssuedLocationNotSupported(state.gatekeeperRecordState)) {\n                return types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED;\n            }\n            if (state.gatewayStatus === types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP) {\n                return types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP;\n            }\n            return hasExpired(gatewayToken) ? types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED : types_1.GatewayStatus.ACTIVE;\n        case types_1.State.REVOKED:\n            return types_1.GatewayStatus.REVOKED;\n        case types_1.State.FROZEN:\n            return types_1.GatewayStatus.FROZEN;\n        default:\n            return types_1.GatewayStatus.UNKNOWN;\n    }\n};\nexports.statusFromToken = statusFromToken;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}