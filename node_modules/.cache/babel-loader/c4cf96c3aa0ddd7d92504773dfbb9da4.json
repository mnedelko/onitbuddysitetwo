{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _regeneratorRuntime = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useGateway = exports.GatewayProvider = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nvar react_1 = __importStar(require(\"react\"));\nvar iframe_resizer_react_1 = __importDefault(require(\"iframe-resizer-react\"));\nvar types_1 = require(\"../types\");\nvar logger_1 = __importDefault(require(\"../logger\"));\nvar Wrapper_1 = require(\"../wrapper/Wrapper\");\nvar constants_1 = require(\"../constants\");\nvar gatekeeperClient_1 = __importDefault(require(\"../utils/gatekeeperClient\"));\nvar useReducer_1 = __importDefault(require(\"../useReducer\"));\nvar useUserInteraction_1 = __importDefault(require(\"../useHooks/useUserInteraction\"));\nvar useOrchestration_1 = __importDefault(require(\"../useHooks/useOrchestration\"));\nvar useWalletHooks_1 = __importDefault(require(\"../useHooks/useWalletHooks\"));\nvar status_1 = require(\"../utils/status\");\nvar config_1 = require(\"../config\");\nvar GatewayContext = react_1.default.createContext({\n  requestGatewayToken: function () {\n    var _requestGatewayToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    function requestGatewayToken() {\n      return _requestGatewayToken.apply(this, arguments);\n    }\n    return requestGatewayToken;\n  }(),\n  gatewayStatus: types_1.GatewayStatus.NOT_REQUESTED\n});\nvar redirectUrlFromWindow = function redirectUrlFromWindow() {\n  return encodeURIComponent(window.location.href.split('?')[0]);\n};\nvar GatewayProvider = function GatewayProvider(_ref) {\n  var _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    wallet = _ref.wallet,\n    chainImplementation = _ref.chainImplementation,\n    wrapper = _ref.wrapper,\n    logo = _ref.logo,\n    _ref$stage = _ref.stage,\n    stage = _ref$stage === void 0 ? 'prod' : _ref$stage,\n    redirectUrl = _ref.redirectUrl,\n    gatekeeperNetwork = _ref.gatekeeperNetwork,\n    _ref$options = _ref.options,\n    options = _ref$options === void 0 ? {\n      autoShowModal: true\n    } : _ref$options,\n    ownerSigns = _ref.ownerSigns;\n  var gatekeeperNetworkAddress = gatekeeperNetwork;\n  var _ref2 = (0, react_1.useReducer)(useReducer_1.default, {\n      options: options,\n      gatewayStatus: types_1.GatewayStatus.UNKNOWN,\n      tokenRequested: false,\n      iframeMinimized: false,\n      firstTokenCheck: true,\n      renderIframe: false,\n      powoFinished: false,\n      refreshInProgress: false,\n      walletPowoInProgress: false,\n      walletAddress: wallet === null || wallet === void 0 ? void 0 : wallet.publicKey,\n      iframeSrcUrl: undefined,\n      stage: stage,\n      redirectUrl: redirectUrl || redirectUrlFromWindow(),\n      tokenIssuanceState: types_1.TokenIssuanceState.NOT_REQUESTED,\n      refreshTokenState: types_1.RefreshTokenState.NOT_REQUIRED,\n      civicPass: {\n        status: types_1.CivicPassIssuanceStatus.NOT_REQUESTED,\n        iframeMinimized: false,\n        renderIframe: false\n      },\n      gatekeeperNetworkAddress: gatekeeperNetworkAddress,\n      chainType: chainImplementation.chainType,\n      ownerSigns: ownerSigns,\n      ownerTransactionConfirmed: false\n    }),\n    _ref3 = _slicedToArray(_ref2, 2),\n    state = _ref3[0],\n    dispatch = _ref3[1];\n  var gatewayStatus = state.gatewayStatus,\n    iframeMinimized = state.iframeMinimized,\n    renderIframe = state.renderIframe,\n    gatewayToken = state.gatewayToken,\n    iframeSrcUrl = state.iframeSrcUrl,\n    gatewayTokenTransaction = state.gatewayTokenTransaction;\n  (0, useWalletHooks_1.default)(wallet, state, dispatch); // need to handle wallet connect and disconnect first\n  // ensure the state is updated with any changes to input props\n  (0, react_1.useEffect)(function () {\n    dispatch({\n      type: 'updateStateWithProps',\n      redirectUrl: redirectUrl || redirectUrlFromWindow(),\n      stage: stage,\n      walletAddress: wallet === null || wallet === void 0 ? void 0 : wallet.publicKey,\n      gatekeeperNetworkAddress: gatekeeperNetworkAddress,\n      ownerSigns: ownerSigns\n    });\n  }, [redirectUrl, stage, wallet === null || wallet === void 0 ? void 0 : wallet.publicKey, gatekeeperNetworkAddress, ownerSigns]);\n  var network = chainImplementation.httpConfig.queryParams.network;\n  var headers = chainImplementation.httpConfig.headers;\n  var gatekeeperEndpoint = chainImplementation.httpConfig.baseUrl;\n  var gatekeeperClient = (0, react_1.useCallback)(function () {\n    if (!gatekeeperNetworkAddress) {\n      throw new Error('No gatekeeper network passed in.');\n    }\n    return new gatekeeperClient_1.default({\n      baseUrl: gatekeeperEndpoint,\n      stage: stage,\n      queryParams: {\n        network: network,\n        gatekeeperNetworkAddress: gatekeeperNetworkAddress\n      },\n      headers: headers\n    });\n  }, [stage, gatekeeperEndpoint, gatekeeperNetworkAddress, network]);\n  // this hook implements the main business logic and handles requesting and refreshing gateway tokens\n  (0, useOrchestration_1.default)({\n    wallet: wallet,\n    chainImplementation: chainImplementation,\n    stage: stage,\n    gatekeeperClient: gatekeeperClient\n  }, state, dispatch);\n  // requestGatewayToken is the only user-triggered event handled by the component\n  // the compliance iframe user interaction is handled using events triggered from the iframe\n  var _ref4 = (0, useUserInteraction_1.default)({\n      wallet: wallet\n    }, state, dispatch),\n    requestGatewayToken = _ref4.requestGatewayToken;\n  var civicPassSrcUrl = (0, config_1.getCivicPassEndpoint)(stage);\n  /**\n   * manage local state for display of the close button ui relative to iframe loading\n   */\n  var _ref5 = (0, react_1.useState)(false),\n    _ref6 = _slicedToArray(_ref5, 2),\n    iframeLoaded = _ref6[0],\n    setIframeLoaded = _ref6[1];\n  (0, react_1.useEffect)(function () {\n    logger_1.default.info('GatewayContext gatewayStatus', (0, status_1.statusDisplayValue)(gatewayStatus));\n  }, [gatewayStatus]);\n  /**\n   * Reset the iFrame when removing the iFrame from the DOM\n   */\n  (0, react_1.useEffect)(function () {\n    if (!renderIframe) {\n      setIframeLoaded(false);\n    }\n  }, [renderIframe]);\n  return (0, jsx_runtime_1.jsx)(GatewayContext.Provider, Object.assign({\n    value: {\n      requestGatewayToken: requestGatewayToken,\n      gatewayStatus: (0, status_1.mapStatus)(gatewayStatus),\n      gatewayToken: gatewayStatus === types_1.GatewayStatus.ACTIVE ? gatewayToken : undefined,\n      gatewayTokenTransaction: gatewayTokenTransaction,\n      civicPassSrcUrl: civicPassSrcUrl\n    }\n  }, {\n    children: (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, {\n      children: [children, renderIframe && (0, jsx_runtime_1.jsx)(\"div\", Object.assign({\n        \"data-testid\": constants_1.TESTID_WRAPPER_CONTAINER,\n        hidden: iframeMinimized\n      }, {\n        children: (0, jsx_runtime_1.jsx)(Wrapper_1.Wrapper, Object.assign({\n          \"data-testid\": constants_1.TESTID_WRAPPER,\n          onClose: function onClose() {\n            return dispatch({\n              type: 'civicPass_close'\n            });\n          },\n          wrapper: wrapper,\n          logo: logo,\n          loaded: iframeLoaded\n        }, {\n          children: (0, jsx_runtime_1.jsx)(iframe_resizer_react_1.default, {\n            \"data-testid\": constants_1.TESTID_IFRAME,\n            src: iframeSrcUrl,\n            id: constants_1.IFRAME_ID,\n            style: {\n              width: '1px',\n              minWidth: '100%',\n              border: 'none',\n              height: '26px',\n              transition: 'height 0.25s ease'\n            },\n            heightCalculationMethod: \"min\",\n            checkOrigin: false,\n            onLoad: function onLoad() {\n              return setIframeLoaded(true);\n            },\n            inPageLinks: true,\n            allow: \"camera\",\n            allowFullScreen: true,\n            frameBorder: \"0\"\n          })\n        }))\n      }))]\n    })\n  }));\n};\nexports.GatewayProvider = GatewayProvider;\nvar useGateway = function useGateway() {\n  return (0, react_1.useContext)(GatewayContext);\n};\nexports.useGateway = useGateway;","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__importDefault","exports","useGateway","GatewayProvider","jsx_runtime_1","require","react_1","iframe_resizer_react_1","types_1","logger_1","Wrapper_1","constants_1","gatekeeperClient_1","useReducer_1","useUserInteraction_1","useOrchestration_1","useWalletHooks_1","status_1","config_1","GatewayContext","default","createContext","requestGatewayToken","gatewayStatus","GatewayStatus","NOT_REQUESTED","redirectUrlFromWindow","encodeURIComponent","window","location","href","split","children","wallet","chainImplementation","wrapper","logo","stage","redirectUrl","gatekeeperNetwork","options","autoShowModal","ownerSigns","gatekeeperNetworkAddress","useReducer","UNKNOWN","tokenRequested","iframeMinimized","firstTokenCheck","renderIframe","powoFinished","refreshInProgress","walletPowoInProgress","walletAddress","publicKey","iframeSrcUrl","tokenIssuanceState","TokenIssuanceState","refreshTokenState","RefreshTokenState","NOT_REQUIRED","civicPass","status","CivicPassIssuanceStatus","chainType","ownerTransactionConfirmed","state","dispatch","gatewayToken","gatewayTokenTransaction","useEffect","type","network","httpConfig","queryParams","headers","gatekeeperEndpoint","baseUrl","gatekeeperClient","useCallback","Error","civicPassSrcUrl","getCivicPassEndpoint","useState","iframeLoaded","setIframeLoaded","info","statusDisplayValue","jsx","Provider","assign","mapStatus","ACTIVE","jsxs","Fragment","TESTID_WRAPPER_CONTAINER","hidden","Wrapper","TESTID_WRAPPER","onClose","loaded","TESTID_IFRAME","src","id","IFRAME_ID","style","width","minWidth","border","height","transition","heightCalculationMethod","checkOrigin","onLoad","inPageLinks","allow","allowFullScreen","frameBorder","useContext"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@civic/common-gateway-react/dist/esm/gateway/GatewayContext.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGateway = exports.GatewayProvider = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst react_1 = __importStar(require(\"react\"));\nconst iframe_resizer_react_1 = __importDefault(require(\"iframe-resizer-react\"));\nconst types_1 = require(\"../types\");\nconst logger_1 = __importDefault(require(\"../logger\"));\nconst Wrapper_1 = require(\"../wrapper/Wrapper\");\nconst constants_1 = require(\"../constants\");\nconst gatekeeperClient_1 = __importDefault(require(\"../utils/gatekeeperClient\"));\nconst useReducer_1 = __importDefault(require(\"../useReducer\"));\nconst useUserInteraction_1 = __importDefault(require(\"../useHooks/useUserInteraction\"));\nconst useOrchestration_1 = __importDefault(require(\"../useHooks/useOrchestration\"));\nconst useWalletHooks_1 = __importDefault(require(\"../useHooks/useWalletHooks\"));\nconst status_1 = require(\"../utils/status\");\nconst config_1 = require(\"../config\");\nconst GatewayContext = react_1.default.createContext({\n    requestGatewayToken: async () => { },\n    gatewayStatus: types_1.GatewayStatus.NOT_REQUESTED,\n});\nconst redirectUrlFromWindow = () => encodeURIComponent(window.location.href.split('?')[0]);\nconst GatewayProvider = ({ children = null, wallet, chainImplementation, wrapper, logo, stage = 'prod', redirectUrl, gatekeeperNetwork, options = { autoShowModal: true }, ownerSigns, }) => {\n    const gatekeeperNetworkAddress = gatekeeperNetwork;\n    const [state, dispatch] = (0, react_1.useReducer)(useReducer_1.default, {\n        options,\n        gatewayStatus: types_1.GatewayStatus.UNKNOWN,\n        tokenRequested: false,\n        iframeMinimized: false,\n        firstTokenCheck: true,\n        renderIframe: false,\n        powoFinished: false,\n        refreshInProgress: false,\n        walletPowoInProgress: false,\n        walletAddress: wallet === null || wallet === void 0 ? void 0 : wallet.publicKey,\n        iframeSrcUrl: undefined,\n        stage,\n        redirectUrl: redirectUrl || redirectUrlFromWindow(),\n        tokenIssuanceState: types_1.TokenIssuanceState.NOT_REQUESTED,\n        refreshTokenState: types_1.RefreshTokenState.NOT_REQUIRED,\n        civicPass: {\n            status: types_1.CivicPassIssuanceStatus.NOT_REQUESTED,\n            iframeMinimized: false,\n            renderIframe: false,\n        },\n        gatekeeperNetworkAddress,\n        chainType: chainImplementation.chainType,\n        ownerSigns,\n        ownerTransactionConfirmed: false,\n    });\n    const { gatewayStatus, iframeMinimized, renderIframe, gatewayToken, iframeSrcUrl, gatewayTokenTransaction } = state;\n    (0, useWalletHooks_1.default)(wallet, state, dispatch); // need to handle wallet connect and disconnect first\n    // ensure the state is updated with any changes to input props\n    (0, react_1.useEffect)(() => {\n        dispatch({\n            type: 'updateStateWithProps',\n            redirectUrl: redirectUrl || redirectUrlFromWindow(),\n            stage,\n            walletAddress: wallet === null || wallet === void 0 ? void 0 : wallet.publicKey,\n            gatekeeperNetworkAddress,\n            ownerSigns,\n        });\n    }, [redirectUrl, stage, wallet === null || wallet === void 0 ? void 0 : wallet.publicKey, gatekeeperNetworkAddress, ownerSigns]);\n    const { network } = chainImplementation.httpConfig.queryParams;\n    const { headers } = chainImplementation.httpConfig;\n    const gatekeeperEndpoint = chainImplementation.httpConfig.baseUrl;\n    const gatekeeperClient = (0, react_1.useCallback)(() => {\n        if (!gatekeeperNetworkAddress) {\n            throw new Error('No gatekeeper network passed in.');\n        }\n        return new gatekeeperClient_1.default({\n            baseUrl: gatekeeperEndpoint,\n            stage,\n            queryParams: { network, gatekeeperNetworkAddress },\n            headers,\n        });\n    }, [stage, gatekeeperEndpoint, gatekeeperNetworkAddress, network]);\n    // this hook implements the main business logic and handles requesting and refreshing gateway tokens\n    (0, useOrchestration_1.default)({ wallet, chainImplementation, stage, gatekeeperClient }, state, dispatch);\n    // requestGatewayToken is the only user-triggered event handled by the component\n    // the compliance iframe user interaction is handled using events triggered from the iframe\n    const { requestGatewayToken } = (0, useUserInteraction_1.default)({ wallet }, state, dispatch);\n    const civicPassSrcUrl = (0, config_1.getCivicPassEndpoint)(stage);\n    /**\n     * manage local state for display of the close button ui relative to iframe loading\n     */\n    const [iframeLoaded, setIframeLoaded] = (0, react_1.useState)(false);\n    (0, react_1.useEffect)(() => {\n        logger_1.default.info('GatewayContext gatewayStatus', (0, status_1.statusDisplayValue)(gatewayStatus));\n    }, [gatewayStatus]);\n    /**\n     * Reset the iFrame when removing the iFrame from the DOM\n     */\n    (0, react_1.useEffect)(() => {\n        if (!renderIframe) {\n            setIframeLoaded(false);\n        }\n    }, [renderIframe]);\n    return ((0, jsx_runtime_1.jsx)(GatewayContext.Provider, Object.assign({ value: {\n            requestGatewayToken,\n            gatewayStatus: (0, status_1.mapStatus)(gatewayStatus),\n            gatewayToken: gatewayStatus === types_1.GatewayStatus.ACTIVE ? gatewayToken : undefined,\n            gatewayTokenTransaction,\n            civicPassSrcUrl,\n        } }, { children: (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [children, renderIframe && ((0, jsx_runtime_1.jsx)(\"div\", Object.assign({ \"data-testid\": constants_1.TESTID_WRAPPER_CONTAINER, hidden: iframeMinimized }, { children: (0, jsx_runtime_1.jsx)(Wrapper_1.Wrapper, Object.assign({ \"data-testid\": constants_1.TESTID_WRAPPER, onClose: () => dispatch({ type: 'civicPass_close' }), wrapper: wrapper, logo: logo, loaded: iframeLoaded }, { children: (0, jsx_runtime_1.jsx)(iframe_resizer_react_1.default, { \"data-testid\": constants_1.TESTID_IFRAME, src: iframeSrcUrl, id: constants_1.IFRAME_ID, style: {\n                                width: '1px',\n                                minWidth: '100%',\n                                border: 'none',\n                                height: '26px',\n                                transition: 'height 0.25s ease',\n                            }, heightCalculationMethod: \"min\", checkOrigin: false, onLoad: () => setIframeLoaded(true), inPageLinks: true, allow: \"camera\", allowFullScreen: true, frameBorder: \"0\" }) })) })))] }) })));\n};\nexports.GatewayProvider = GatewayProvider;\nconst useGateway = () => (0, react_1.useContext)(GatewayContext);\nexports.useGateway = useGateway;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}