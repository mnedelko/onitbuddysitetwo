{"ast":null,"code":"import _slicedToArray from \"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n/* eslint-disable react-hooks/exhaustive-deps */\nimport querySelectorAll from 'dom-helpers/querySelectorAll';\nimport React, { useCallback, useContext, useLayoutEffect, useMemo, useState, useRef } from 'react';\nexport var FocusListContext = /*#__PURE__*/React.createContext(null);\nvar defaultOpts = {\n  behavior: 'stop'\n};\nexport function useListOption(dataItem) {\n  var ctx = useContext(FocusListContext);\n  var prevElement = useRef(null); // this is a bit convoluted because we want to use a ref object, a callback ref\n  // causes an extra render which is fine except that it means the list hook for\n  // anchor items fires before elements are processed\n\n  var ref = useRef(null);\n  useLayoutEffect(function () {\n    return function () {\n      ctx == null ? void 0 : ctx.map.delete(ref.current);\n    };\n  }, []);\n  useLayoutEffect(function () {\n    if (prevElement.current !== ref.current) {\n      ctx == null ? void 0 : ctx.map.delete(prevElement.current);\n    }\n    prevElement.current = ref.current;\n    if (ref.current && (ctx == null ? void 0 : ctx.map.get(ref.current)) !== dataItem) {\n      ctx == null ? void 0 : ctx.map.set(ref.current, dataItem);\n    }\n  });\n  var focused = dataItem === (ctx == null ? void 0 : ctx.focusedItem);\n  return [ref, focused, focused ? ctx == null ? void 0 : ctx.activeId : undefined];\n}\nexport var useFocusList = function useFocusList(_ref) {\n  var listRef = _ref.scope,\n    anchorItem = _ref.anchorItem,\n    _ref$focusFirstItem = _ref.focusFirstItem,\n    _focusFirstItem = _ref$focusFirstItem === void 0 ? false : _ref$focusFirstItem,\n    _ref$scopeSelector = _ref.scopeSelector,\n    _scopeSelector = _ref$scopeSelector === void 0 ? '' : _ref$scopeSelector,\n    activeId = _ref.activeId;\n  var map = useMemo(function () {\n    return new WeakMap();\n  }, []);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    focusedItem = _useState2[0],\n    setFocusedItem = _useState2[1];\n  var itemSelector = \"\".concat(_scopeSelector, \" [data-rw-focusable]\").trim();\n  var get = function get() {\n    var items = querySelectorAll(listRef.current, itemSelector);\n    return [items, items.find(function (e) {\n      return e.dataset.rwFocused === '';\n    })];\n  };\n  var list = useMemo(function () {\n    return {\n      size: function size() {\n        var _get = get(),\n          _get2 = _slicedToArray(_get, 1),\n          items = _get2[0];\n        return items.length;\n      },\n      get: get,\n      toDataItem: function toDataItem(el) {\n        return map.get(el);\n      },\n      first: function first() {\n        var _get3 = get(),\n          _get4 = _slicedToArray(_get3, 1),\n          _get4$ = _slicedToArray(_get4[0], 1),\n          first = _get4$[0];\n        return first;\n      },\n      focus: function focus(el) {\n        if (!el || map.has(el)) setFocusedItem(el ? map.get(el) : undefined);\n      },\n      last: function last() {\n        var _get5 = get(),\n          _get6 = _slicedToArray(_get5, 1),\n          items = _get6[0];\n        return items[items.length - 1];\n      },\n      next: function next() {\n        var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOpts,\n          behavior = _ref2.behavior;\n        var _get7 = get(),\n          _get8 = _slicedToArray(_get7, 2),\n          items = _get8[0],\n          focusedItem = _get8[1];\n        var nextIdx = items.indexOf(focusedItem) + 1;\n        if (nextIdx >= items.length) {\n          if (behavior === 'loop') return items[0];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n        return items[nextIdx];\n      },\n      prev: function prev() {\n        var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOpts,\n          behavior = _ref3.behavior;\n        var _get9 = get(),\n          _get10 = _slicedToArray(_get9, 2),\n          items = _get10[0],\n          focusedItem = _get10[1];\n        var nextIdx = Math.max(0, items.indexOf(focusedItem)) - 1;\n        if (nextIdx < 0) {\n          if (behavior === 'loop') return items[items.length - 1];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n        return items[nextIdx];\n      }\n    };\n  }, []);\n  useLayoutEffect(function () {\n    if (!anchorItem) {\n      list.focus(null);\n      return;\n    }\n    var element = get()[0].find(function (el) {\n      return list.toDataItem(el) === anchorItem;\n    });\n    list.focus(element);\n  }, [anchorItem]);\n  useLayoutEffect(function () {\n    if (!listRef.current) return;\n    var _get11 = get(),\n      _get12 = _slicedToArray(_get11, 2),\n      focusedElement = _get12[1];\n    var hasItem = focusedElement != null;\n    if (!hasItem && _focusFirstItem || hasItem && !listRef.current.contains(focusedElement)) {\n      if (_focusFirstItem) list.focus(list.first());else list.focus(null);\n    }\n  });\n  var context = useMemo(function () {\n    return {\n      map: map,\n      focusedItem: focusedItem,\n      activeId: activeId\n    };\n  }, [focusedItem, activeId]);\n  list.context = context;\n  list.getFocused = useCallback(function () {\n    return focusedItem;\n  }, [focusedItem]);\n  list.hasFocused = function () {\n    return focusedItem !== undefined;\n  };\n  return list;\n};","map":{"version":3,"names":["querySelectorAll","React","useCallback","useContext","useLayoutEffect","useMemo","useState","useRef","FocusListContext","createContext","defaultOpts","behavior","useListOption","dataItem","ctx","prevElement","ref","map","delete","current","get","set","focused","focusedItem","activeId","undefined","useFocusList","listRef","scope","anchorItem","focusFirstItem","_focusFirstItem","scopeSelector","_scopeSelector","WeakMap","setFocusedItem","itemSelector","trim","items","find","e","dataset","rwFocused","list","size","length","toDataItem","el","first","focus","has","last","next","nextIdx","indexOf","prev","Math","max","element","focusedElement","hasItem","contains","context","getFocused","hasFocused"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/react-widgets/esm/FocusListContext.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport querySelectorAll from 'dom-helpers/querySelectorAll';\nimport React, { useCallback, useContext, useLayoutEffect, useMemo, useState, useRef } from 'react';\nexport const FocusListContext = /*#__PURE__*/React.createContext(null);\nconst defaultOpts = {\n  behavior: 'stop'\n};\nexport function useListOption(dataItem) {\n  const ctx = useContext(FocusListContext);\n  const prevElement = useRef(null); // this is a bit convoluted because we want to use a ref object, a callback ref\n  // causes an extra render which is fine except that it means the list hook for\n  // anchor items fires before elements are processed\n\n  const ref = useRef(null);\n  useLayoutEffect(() => () => {\n    ctx == null ? void 0 : ctx.map.delete(ref.current);\n  }, []);\n  useLayoutEffect(() => {\n    if (prevElement.current !== ref.current) {\n      ctx == null ? void 0 : ctx.map.delete(prevElement.current);\n    }\n\n    prevElement.current = ref.current;\n\n    if (ref.current && (ctx == null ? void 0 : ctx.map.get(ref.current)) !== dataItem) {\n      ctx == null ? void 0 : ctx.map.set(ref.current, dataItem);\n    }\n  });\n  const focused = dataItem === (ctx == null ? void 0 : ctx.focusedItem);\n  return [ref, focused, focused ? ctx == null ? void 0 : ctx.activeId : undefined];\n}\nexport const useFocusList = ({\n  scope: listRef,\n  anchorItem,\n  focusFirstItem: _focusFirstItem = false,\n  scopeSelector: _scopeSelector = '',\n  activeId\n}) => {\n  const map = useMemo(() => new WeakMap(), []);\n  const [focusedItem, setFocusedItem] = useState();\n  const itemSelector = `${_scopeSelector} [data-rw-focusable]`.trim();\n\n  const get = () => {\n    const items = querySelectorAll(listRef.current, itemSelector);\n    return [items, items.find(e => e.dataset.rwFocused === '')];\n  };\n\n  const list = useMemo(() => {\n    return {\n      size() {\n        const [items] = get();\n        return items.length;\n      },\n\n      get,\n      toDataItem: el => map.get(el),\n\n      first() {\n        const [[first]] = get();\n        return first;\n      },\n\n      focus(el) {\n        if (!el || map.has(el)) setFocusedItem(el ? map.get(el) : undefined);\n      },\n\n      last() {\n        const [items] = get();\n        return items[items.length - 1];\n      },\n\n      next({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = items.indexOf(focusedItem) + 1;\n\n        if (nextIdx >= items.length) {\n          if (behavior === 'loop') return items[0];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      },\n\n      prev({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = Math.max(0, items.indexOf(focusedItem)) - 1;\n\n        if (nextIdx < 0) {\n          if (behavior === 'loop') return items[items.length - 1];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      }\n\n    };\n  }, []);\n  useLayoutEffect(() => {\n    if (!anchorItem) {\n      list.focus(null);\n      return;\n    }\n\n    const element = get()[0].find(el => list.toDataItem(el) === anchorItem);\n    list.focus(element);\n  }, [anchorItem]);\n  useLayoutEffect(() => {\n    if (!listRef.current) return;\n    const [, focusedElement] = get();\n    const hasItem = focusedElement != null;\n\n    if (!hasItem && _focusFirstItem || hasItem && !listRef.current.contains(focusedElement)) {\n      if (_focusFirstItem) list.focus(list.first());else list.focus(null);\n    }\n  });\n  const context = useMemo(() => ({\n    map,\n    focusedItem,\n    activeId\n  }), [focusedItem, activeId]);\n  list.context = context;\n  list.getFocused = useCallback(() => focusedItem, [focusedItem]);\n\n  list.hasFocused = () => focusedItem !== undefined;\n\n  return list;\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}