{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pollUntilConditionMet = exports.sleep = void 0;\nvar logger_1 = __importDefault(require(\"../logger\"));\nvar sleep = function sleep(ms) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, ms);\n  });\n};\nexports.sleep = sleep;\nvar pollUntilConditionMet = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(fnToRun, conditionChecker) {\n    var interval,\n      retries,\n      result,\n      _args = arguments;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            interval = _args.length > 2 && _args[2] !== undefined ? _args[2] : 2000;\n            retries = _args.length > 3 && _args[3] !== undefined ? _args[3] : 20;\n            if (!(retries <= 0)) {\n              _context.next = 5;\n              break;\n            }\n            logger_1.default.debug('WaitForStatusChange - no more retries');\n            throw new Error(\"pollUntilConditionMet all retries used calling \".concat(fnToRun));\n          case 5:\n            logger_1.default.debug(\"calling \".concat(fnToRun.name, \" retries = \").concat(retries));\n            _context.next = 8;\n            return fnToRun();\n          case 8:\n            result = _context.sent;\n            if (!conditionChecker(result)) {\n              _context.next = 11;\n              break;\n            }\n            return _context.abrupt(\"return\", result);\n          case 11:\n            logger_1.default.debug(\"Waiting \".concat(interval, \"ms before running \").concat(fnToRun.name, \" and checking condition \").concat(conditionChecker));\n            _context.next = 14;\n            return (0, exports.sleep)(interval);\n          case 14:\n            return _context.abrupt(\"return\", (0, exports.pollUntilConditionMet)(fnToRun, conditionChecker, interval, retries - 1));\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function pollUntilConditionMet(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexports.pollUntilConditionMet = pollUntilConditionMet;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","pollUntilConditionMet","sleep","logger_1","require","ms","Promise","resolve","setTimeout","fnToRun","conditionChecker","interval","retries","default","debug","Error","name","result"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@civic/common-gateway-react/dist/esm/actionCreator/utils.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pollUntilConditionMet = exports.sleep = void 0;\nconst logger_1 = __importDefault(require(\"../logger\"));\nconst sleep = (ms) => {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n};\nexports.sleep = sleep;\nconst pollUntilConditionMet = async (fnToRun, conditionChecker, interval = 2000, retries = 20) => {\n    if (retries <= 0) {\n        logger_1.default.debug('WaitForStatusChange - no more retries');\n        throw new Error(`pollUntilConditionMet all retries used calling ${fnToRun}`);\n    }\n    logger_1.default.debug(`calling ${fnToRun.name} retries = ${retries}`);\n    const result = (await fnToRun());\n    if (conditionChecker(result)) {\n        return result;\n    }\n    logger_1.default.debug(`Waiting ${interval}ms before running ${fnToRun.name} and checking condition ${conditionChecker}`);\n    await (0, exports.sleep)(interval);\n    return (0, exports.pollUntilConditionMet)(fnToRun, conditionChecker, interval, retries - 1);\n};\nexports.pollUntilConditionMet = pollUntilConditionMet;\n"],"mappings":"AAAA,YAAY;;AAAC;AAAA;AACb,IAAIA,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,IAAK,UAAUC,GAAG,EAAE;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAU,GAAID,GAAG,GAAG;IAAE,SAAS,EAAEA;EAAI,CAAC;AAC7D,CAAC;AACDE,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,qBAAqB,GAAGF,OAAO,CAACG,KAAK,GAAG,KAAK,CAAC;AACtD,IAAMC,QAAQ,GAAGT,eAAe,CAACU,OAAO,CAAC,WAAW,CAAC,CAAC;AACtD,IAAMF,KAAK,GAAG,SAARA,KAAK,CAAIG,EAAE,EAAK;EAClB,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO;IAAA,OAAKC,UAAU,CAACD,OAAO,EAAEF,EAAE,CAAC;EAAA,EAAC;AAC5D,CAAC;AACDN,OAAO,CAACG,KAAK,GAAGA,KAAK;AACrB,IAAMD,qBAAqB;EAAA,sEAAG,iBAAOQ,OAAO,EAAEC,gBAAgB;IAAA;MAAA;MAAA;MAAA;IAAA;MAAA;QAAA;UAAA;YAAEC,QAAQ,2DAAG,IAAI;YAAEC,OAAO,2DAAG,EAAE;YAAA,MACrFA,OAAO,IAAI,CAAC;cAAA;cAAA;YAAA;YACZT,QAAQ,CAACU,OAAO,CAACC,KAAK,CAAC,uCAAuC,CAAC;YAAC,MAC1D,IAAIC,KAAK,0DAAmDN,OAAO,EAAG;UAAA;YAEhFN,QAAQ,CAACU,OAAO,CAACC,KAAK,mBAAYL,OAAO,CAACO,IAAI,wBAAcJ,OAAO,EAAG;YAAC;YAAA,OACjDH,OAAO,EAAE;UAAA;YAAzBQ,MAAM;YAAA,KACRP,gBAAgB,CAACO,MAAM,CAAC;cAAA;cAAA;YAAA;YAAA,iCACjBA,MAAM;UAAA;YAEjBd,QAAQ,CAACU,OAAO,CAACC,KAAK,mBAAYH,QAAQ,+BAAqBF,OAAO,CAACO,IAAI,qCAA2BN,gBAAgB,EAAG;YAAC;YAAA,OACpH,CAAC,CAAC,EAAEX,OAAO,CAACG,KAAK,EAAES,QAAQ,CAAC;UAAA;YAAA,iCAC3B,CAAC,CAAC,EAAEZ,OAAO,CAACE,qBAAqB,EAAEQ,OAAO,EAAEC,gBAAgB,EAAEC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAC9F;EAAA,gBAbKX,qBAAqB;IAAA;EAAA;AAAA,GAa1B;AACDF,OAAO,CAACE,qBAAqB,GAAGA,qBAAqB"},"metadata":{},"sourceType":"script"}