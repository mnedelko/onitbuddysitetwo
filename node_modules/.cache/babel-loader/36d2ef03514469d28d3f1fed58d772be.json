{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _defineProperty = require(\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reducer = void 0;\nvar react_1 = require(\"react\");\nvar R = __importStar(require(\"ramda\"));\nvar types_1 = require(\"../types\");\nvar logger_1 = __importDefault(require(\"../logger\"));\nvar useWalletHooks_1 = __importDefault(require(\"./useWalletHooks\"));\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'getGatekeeperRecord':\n      return Object.assign(Object.assign({}, state), {\n        gatewayStatus: types_1.GatewayStatus.CHECKING,\n        gatekeeperRecordState: undefined\n      });\n    case 'getGatekeeperRecord_failure':\n      return Object.assign(Object.assign({}, state), {\n        gatekeeperRecordState: action.gatekeeperRecord.state\n      });\n    case 'getGatekeeperRecord_success':\n      return Object.assign(Object.assign({}, state), {\n        gatekeeperRecordState: action.gatekeeperRecord.state,\n        civicPass: Object.assign(Object.assign({}, state.civicPass), {\n          requestPayload: action.gatekeeperRecord.payload\n        })\n      });\n    case 'getGatekeeperRecord_location_not_supported':\n    case 'getGatekeeperRecord_issued_location_not_supported':\n      return Object.assign(Object.assign({}, state), {\n        gatewayStatus: types_1.GatewayStatus.LOCATION_NOT_SUPPORTED,\n        gatekeeperRecordState: action.gatekeeperRecord.state,\n        civicPass: Object.assign(Object.assign({}, state.civicPass), {\n          requestPayload: action.gatekeeperRecord.payload\n        })\n      });\n    case 'getGatekeeperRecord_vpn_not_supported':\n    case 'getGatekeeperRecord_issued_vpn_not_supported':\n      return Object.assign(Object.assign({}, state), {\n        gatewayStatus: types_1.GatewayStatus.VPN_NOT_SUPPORTED,\n        gatekeeperRecordState: action.gatekeeperRecord.state,\n        civicPass: Object.assign(Object.assign({}, state.civicPass), {\n          requestPayload: action.gatekeeperRecord.payload\n        })\n      });\n    case 'getGatekeeperRecord_not_found':\n      return Object.assign(Object.assign({}, state), {\n        gatekeeperRecordState: action.gatekeeperRecord.state\n      });\n    default:\n      return state;\n  }\n};\nexports.reducer = reducer;\nvar useGetGatekeeperRecord = function useGetGatekeeperRecord(_ref, state, dispatch) {\n  var wallet = _ref.wallet,\n    gatekeeperClient = _ref.gatekeeperClient,\n    httpConfig = _ref.httpConfig,\n    networkConfig = _ref.networkConfig;\n  var _ref2 = (0, useWalletHooks_1.default)(wallet, state, dispatch),\n    expectWalletConnected = _ref2.expectWalletConnected;\n  var logDebug = function logDebug(message) {\n    var obj = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return logger_1.default.debug(\"[useGetGatekeeperRecord] \".concat(message), obj);\n  };\n  var gatekeeperNetworkAddress = state.gatekeeperNetworkAddress;\n  var dispatchFetch = function dispatchFetch() {\n    return {\n      type: 'getGatekeeperRecord'\n    };\n  };\n  var dispatchFailure = function dispatchFailure() {\n    return {\n      type: 'getGatekeeperRecord_failure',\n      gatekeeperRecord: {\n        state: types_1.GatekeeperAPIStatus.SERVER_FAILURE,\n        payload: undefined\n      }\n    };\n  };\n  var dispatchSuccess = function dispatchSuccess(record) {\n    return {\n      type: 'getGatekeeperRecord_success',\n      gatekeeperRecord: record\n    };\n  };\n  var dispatchLocationNotSupported = function dispatchLocationNotSupported(record) {\n    return {\n      type: 'getGatekeeperRecord_location_not_supported',\n      gatekeeperRecord: record\n    };\n  };\n  var dispatchIssuedLocationNotSupported = function dispatchIssuedLocationNotSupported(record) {\n    return {\n      type: 'getGatekeeperRecord_issued_location_not_supported',\n      gatekeeperRecord: record\n    };\n  };\n  var dispatchVpnNotSupported = function dispatchVpnNotSupported(record) {\n    return {\n      type: 'getGatekeeperRecord_vpn_not_supported',\n      gatekeeperRecord: record\n    };\n  };\n  var dispatchIssuedVpnNotSupported = function dispatchIssuedVpnNotSupported(record) {\n    return {\n      type: 'getGatekeeperRecord_issued_vpn_not_supported',\n      gatekeeperRecord: record\n    };\n  };\n  var dispatchRecordNotFound = function dispatchRecordNotFound(record) {\n    return {\n      type: 'getGatekeeperRecord_not_found',\n      gatekeeperRecord: record\n    };\n  };\n  var getAction = function getAction(gatekeeperRecordState) {\n    var _actions;\n    var actions = (_actions = {}, _defineProperty(_actions, types_1.GatekeeperAPIStatus.REQUESTED, function () {\n      return dispatchSuccess(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.ISSUED, function () {\n      return dispatchSuccess(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.ISSUED_EXPIRED, function () {\n      return dispatchSuccess(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.ISSUED_EXPIRY_APPROACHING, function () {\n      return dispatchSuccess(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.ISSUED_LOCATION_NOT_SUPPORTED, function () {\n      return dispatchIssuedLocationNotSupported(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.ISSUED_VPN_NOT_SUPPORTED, function () {\n      return dispatchIssuedVpnNotSupported(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.VPN_NOT_SUPPORTED, function () {\n      return dispatchVpnNotSupported(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.LOCATION_NOT_SUPPORTED, function () {\n      return dispatchLocationNotSupported(gatekeeperRecordState);\n    }), _defineProperty(_actions, types_1.GatekeeperAPIStatus.NOT_REQUESTED, function () {\n      return dispatchRecordNotFound(gatekeeperRecordState);\n    }), _actions);\n    return actions[gatekeeperRecordState.state];\n  };\n  /**\n   * Check to see if there is getGatekeeperRecord and dispatch actions based on the state of the record.\n   * If the service call fails dispatch a failure.\n   */\n  var dispatchGatekeeperRecord = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var walletAddress, record, action;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              walletAddress = expectWalletConnected();\n              logDebug('Fetching Gatekeeper record...', walletAddress);\n              dispatch(dispatchFetch());\n              _context.prev = 3;\n              _context.next = 6;\n              return gatekeeperClient().getGatekeeperRecordWithPayload(walletAddress.publicKey);\n            case 6:\n              record = _context.sent;\n              logDebug('Gatekeeper record response state: ', types_1.GatekeeperAPIStatus[record.state]);\n              action = getAction(record);\n              if (action) {\n                _context.next = 13;\n                break;\n              }\n              logger_1.default.error('Cannot dispatch action for invalid Gatekeeper Record State.', {\n                record: record\n              });\n              dispatch(dispatchFailure());\n              return _context.abrupt(\"return\");\n            case 13:\n              dispatch(action());\n              _context.next = 21;\n              break;\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](3);\n              logger_1.default.error('Failed to fetch Gatekeeper record', _context.t0);\n              dispatch(dispatchFailure());\n              throw _context.t0;\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 16]]);\n    }));\n    return function dispatchGatekeeperRecord() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var useHttpConfigRef = function useHttpConfigRef(newHttpConfig) {\n    var ref = (0, react_1.useRef)();\n    // We have to perform a deep equality check, otherwise useEffect will run every time the httpConfig object reference changes.\n    if (!R.equals(newHttpConfig, ref.current)) {\n      ref.current = newHttpConfig;\n    }\n    return ref.current;\n  };\n  (0, react_1.useEffect)(function () {\n    logger_1.default.debug('useEffect: useGatekeeperRecord networkConfig.requiresGatekeeperRecordStatusCheck', networkConfig.requiresGatekeeperRecordStatusCheck);\n    if (networkConfig.requiresGatekeeperRecordStatusCheck) {\n      // if a gateway token exists we should poll as a record should (eventually) exist\n      dispatchGatekeeperRecord();\n    }\n  }, [gatekeeperNetworkAddress, useHttpConfigRef(httpConfig), networkConfig.requiresGatekeeperRecordStatusCheck]);\n  return {\n    dispatchGatekeeperRecord: dispatchGatekeeperRecord\n  };\n};\nexports.default = useGetGatekeeperRecord;","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__importDefault","exports","reducer","react_1","require","R","types_1","logger_1","useWalletHooks_1","state","action","type","assign","gatewayStatus","GatewayStatus","CHECKING","gatekeeperRecordState","gatekeeperRecord","civicPass","requestPayload","payload","LOCATION_NOT_SUPPORTED","VPN_NOT_SUPPORTED","useGetGatekeeperRecord","dispatch","wallet","gatekeeperClient","httpConfig","networkConfig","default","expectWalletConnected","logDebug","message","obj","debug","gatekeeperNetworkAddress","dispatchFetch","dispatchFailure","GatekeeperAPIStatus","SERVER_FAILURE","dispatchSuccess","record","dispatchLocationNotSupported","dispatchIssuedLocationNotSupported","dispatchVpnNotSupported","dispatchIssuedVpnNotSupported","dispatchRecordNotFound","getAction","actions","REQUESTED","ISSUED","ISSUED_EXPIRED","ISSUED_EXPIRY_APPROACHING","ISSUED_LOCATION_NOT_SUPPORTED","ISSUED_VPN_NOT_SUPPORTED","NOT_REQUESTED","dispatchGatekeeperRecord","walletAddress","getGatekeeperRecordWithPayload","publicKey","error","useHttpConfigRef","newHttpConfig","ref","useRef","equals","current","useEffect","requiresGatekeeperRecordStatusCheck"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@civic/common-gateway-react/dist/esm/useHooks/useGatekeeperRecord.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reducer = void 0;\nconst react_1 = require(\"react\");\nconst R = __importStar(require(\"ramda\"));\nconst types_1 = require(\"../types\");\nconst logger_1 = __importDefault(require(\"../logger\"));\nconst useWalletHooks_1 = __importDefault(require(\"./useWalletHooks\"));\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case 'getGatekeeperRecord':\n            return Object.assign(Object.assign({}, state), { gatewayStatus: types_1.GatewayStatus.CHECKING, gatekeeperRecordState: undefined });\n        case 'getGatekeeperRecord_failure':\n            return Object.assign(Object.assign({}, state), { gatekeeperRecordState: action.gatekeeperRecord.state });\n        case 'getGatekeeperRecord_success':\n            return Object.assign(Object.assign({}, state), { gatekeeperRecordState: action.gatekeeperRecord.state, civicPass: Object.assign(Object.assign({}, state.civicPass), { requestPayload: action.gatekeeperRecord.payload }) });\n        case 'getGatekeeperRecord_location_not_supported':\n        case 'getGatekeeperRecord_issued_location_not_supported':\n            return Object.assign(Object.assign({}, state), { gatewayStatus: types_1.GatewayStatus.LOCATION_NOT_SUPPORTED, gatekeeperRecordState: action.gatekeeperRecord.state, civicPass: Object.assign(Object.assign({}, state.civicPass), { requestPayload: action.gatekeeperRecord.payload }) });\n        case 'getGatekeeperRecord_vpn_not_supported':\n        case 'getGatekeeperRecord_issued_vpn_not_supported':\n            return Object.assign(Object.assign({}, state), { gatewayStatus: types_1.GatewayStatus.VPN_NOT_SUPPORTED, gatekeeperRecordState: action.gatekeeperRecord.state, civicPass: Object.assign(Object.assign({}, state.civicPass), { requestPayload: action.gatekeeperRecord.payload }) });\n        case 'getGatekeeperRecord_not_found':\n            return Object.assign(Object.assign({}, state), { gatekeeperRecordState: action.gatekeeperRecord.state });\n        default:\n            return state;\n    }\n};\nexports.reducer = reducer;\nconst useGetGatekeeperRecord = ({ wallet, gatekeeperClient, httpConfig, networkConfig, }, state, dispatch) => {\n    const { expectWalletConnected } = (0, useWalletHooks_1.default)(wallet, state, dispatch);\n    const logDebug = (message, obj = null) => logger_1.default.debug(`[useGetGatekeeperRecord] ${message}`, obj);\n    const { gatekeeperNetworkAddress } = state;\n    const dispatchFetch = () => ({\n        type: 'getGatekeeperRecord',\n    });\n    const dispatchFailure = () => ({\n        type: 'getGatekeeperRecord_failure',\n        gatekeeperRecord: { state: types_1.GatekeeperAPIStatus.SERVER_FAILURE, payload: undefined },\n    });\n    const dispatchSuccess = (record) => ({\n        type: 'getGatekeeperRecord_success',\n        gatekeeperRecord: record,\n    });\n    const dispatchLocationNotSupported = (record) => ({\n        type: 'getGatekeeperRecord_location_not_supported',\n        gatekeeperRecord: record,\n    });\n    const dispatchIssuedLocationNotSupported = (record) => ({\n        type: 'getGatekeeperRecord_issued_location_not_supported',\n        gatekeeperRecord: record,\n    });\n    const dispatchVpnNotSupported = (record) => ({\n        type: 'getGatekeeperRecord_vpn_not_supported',\n        gatekeeperRecord: record,\n    });\n    const dispatchIssuedVpnNotSupported = (record) => ({\n        type: 'getGatekeeperRecord_issued_vpn_not_supported',\n        gatekeeperRecord: record,\n    });\n    const dispatchRecordNotFound = (record) => ({\n        type: 'getGatekeeperRecord_not_found',\n        gatekeeperRecord: record,\n    });\n    const getAction = (gatekeeperRecordState) => {\n        const actions = {\n            [types_1.GatekeeperAPIStatus.REQUESTED]: () => dispatchSuccess(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.ISSUED]: () => dispatchSuccess(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.ISSUED_EXPIRED]: () => dispatchSuccess(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.ISSUED_EXPIRY_APPROACHING]: () => dispatchSuccess(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.ISSUED_LOCATION_NOT_SUPPORTED]: () => dispatchIssuedLocationNotSupported(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.ISSUED_VPN_NOT_SUPPORTED]: () => dispatchIssuedVpnNotSupported(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.VPN_NOT_SUPPORTED]: () => dispatchVpnNotSupported(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.LOCATION_NOT_SUPPORTED]: () => dispatchLocationNotSupported(gatekeeperRecordState),\n            [types_1.GatekeeperAPIStatus.NOT_REQUESTED]: () => dispatchRecordNotFound(gatekeeperRecordState),\n        };\n        return actions[gatekeeperRecordState.state];\n    };\n    /**\n     * Check to see if there is getGatekeeperRecord and dispatch actions based on the state of the record.\n     * If the service call fails dispatch a failure.\n     */\n    const dispatchGatekeeperRecord = async () => {\n        const walletAddress = expectWalletConnected();\n        logDebug('Fetching Gatekeeper record...', walletAddress);\n        dispatch(dispatchFetch());\n        try {\n            const record = await gatekeeperClient().getGatekeeperRecordWithPayload(walletAddress.publicKey);\n            logDebug('Gatekeeper record response state: ', types_1.GatekeeperAPIStatus[record.state]);\n            const action = getAction(record);\n            if (!action) {\n                logger_1.default.error('Cannot dispatch action for invalid Gatekeeper Record State.', { record });\n                dispatch(dispatchFailure());\n                return;\n            }\n            dispatch(action());\n        }\n        catch (error) {\n            logger_1.default.error('Failed to fetch Gatekeeper record', error);\n            dispatch(dispatchFailure());\n            throw error;\n        }\n    };\n    const useHttpConfigRef = (newHttpConfig) => {\n        const ref = (0, react_1.useRef)();\n        // We have to perform a deep equality check, otherwise useEffect will run every time the httpConfig object reference changes.\n        if (!R.equals(newHttpConfig, ref.current)) {\n            ref.current = newHttpConfig;\n        }\n        return ref.current;\n    };\n    (0, react_1.useEffect)(() => {\n        logger_1.default.debug('useEffect: useGatekeeperRecord networkConfig.requiresGatekeeperRecordStatusCheck', networkConfig.requiresGatekeeperRecordStatusCheck);\n        if (networkConfig.requiresGatekeeperRecordStatusCheck) {\n            // if a gateway token exists we should poll as a record should (eventually) exist\n            dispatchGatekeeperRecord();\n        }\n    }, [gatekeeperNetworkAddress, useHttpConfigRef(httpConfig), networkConfig.requiresGatekeeperRecordStatusCheck]);\n    return { dispatchGatekeeperRecord };\n};\nexports.default = useGetGatekeeperRecord;\n"],"mappings":"AAAA,YAAY;;AAAC;AAAA;AAAA;AACb,IAAIA,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,KAAMC,MAAM,CAACC,MAAM,GAAI,UAASC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EAC5F,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5B,IAAIG,IAAI,GAAGP,MAAM,CAACQ,wBAAwB,CAACL,CAAC,EAAEC,CAAC,CAAC;EAChD,IAAI,CAACG,IAAI,KAAK,KAAK,IAAIA,IAAI,GAAG,CAACJ,CAAC,CAACM,UAAU,GAAGF,IAAI,CAACG,QAAQ,IAAIH,IAAI,CAACI,YAAY,CAAC,EAAE;IACjFJ,IAAI,GAAG;MAAEK,UAAU,EAAE,IAAI;MAAEC,GAAG,EAAE,eAAW;QAAE,OAAOV,CAAC,CAACC,CAAC,CAAC;MAAE;IAAE,CAAC;EAC/D;EACAJ,MAAM,CAACc,cAAc,CAACZ,CAAC,EAAEG,EAAE,EAAEE,IAAI,CAAC;AACtC,CAAC,GAAK,UAASL,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EACxB,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5BF,CAAC,CAACG,EAAE,CAAC,GAAGF,CAAC,CAACC,CAAC,CAAC;AAChB,CAAE,CAAC;AACH,IAAIW,kBAAkB,GAAI,IAAI,IAAI,IAAI,CAACA,kBAAkB,KAAMf,MAAM,CAACC,MAAM,GAAI,UAASC,CAAC,EAAEc,CAAC,EAAE;EAC3FhB,MAAM,CAACc,cAAc,CAACZ,CAAC,EAAE,SAAS,EAAE;IAAEU,UAAU,EAAE,IAAI;IAAEK,KAAK,EAAED;EAAE,CAAC,CAAC;AACvE,CAAC,GAAI,UAASd,CAAC,EAAEc,CAAC,EAAE;EAChBd,CAAC,CAAC,SAAS,CAAC,GAAGc,CAAC;AACpB,CAAC,CAAC;AACF,IAAIE,YAAY,GAAI,IAAI,IAAI,IAAI,CAACA,YAAY,IAAK,UAAUC,GAAG,EAAE;EAC7D,IAAIA,GAAG,IAAIA,GAAG,CAACV,UAAU,EAAE,OAAOU,GAAG;EACrC,IAAIC,MAAM,GAAG,CAAC,CAAC;EACf,IAAID,GAAG,IAAI,IAAI,EAAE,KAAK,IAAIf,CAAC,IAAIe,GAAG;IAAE,IAAIf,CAAC,KAAK,SAAS,IAAIJ,MAAM,CAACqB,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,GAAG,EAAEf,CAAC,CAAC,EAAEL,eAAe,CAACqB,MAAM,EAAED,GAAG,EAAEf,CAAC,CAAC;EAAC;EACzIW,kBAAkB,CAACK,MAAM,EAAED,GAAG,CAAC;EAC/B,OAAOC,MAAM;AACjB,CAAC;AACD,IAAII,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,IAAK,UAAUL,GAAG,EAAE;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACV,UAAU,GAAIU,GAAG,GAAG;IAAE,SAAS,EAAEA;EAAI,CAAC;AAC7D,CAAC;AACDnB,MAAM,CAACc,cAAc,CAACW,OAAO,EAAE,YAAY,EAAE;EAAER,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DQ,OAAO,CAACC,OAAO,GAAG,KAAK,CAAC;AACxB,IAAMC,OAAO,GAAGC,OAAO,CAAC,OAAO,CAAC;AAChC,IAAMC,CAAC,GAAGX,YAAY,CAACU,OAAO,CAAC,OAAO,CAAC,CAAC;AACxC,IAAME,OAAO,GAAGF,OAAO,CAAC,UAAU,CAAC;AACnC,IAAMG,QAAQ,GAAGP,eAAe,CAACI,OAAO,CAAC,WAAW,CAAC,CAAC;AACtD,IAAMI,gBAAgB,GAAGR,eAAe,CAACI,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACrE,IAAMF,OAAO,GAAG,SAAVA,OAAO,CAAIO,KAAK,EAAEC,MAAM,EAAK;EAC/B,QAAQA,MAAM,CAACC,IAAI;IACf,KAAK,qBAAqB;MACtB,OAAOnC,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAAC,EAAE;QAAEI,aAAa,EAAEP,OAAO,CAACQ,aAAa,CAACC,QAAQ;QAAEC,qBAAqB,EAAElC;MAAU,CAAC,CAAC;IACvI,KAAK,6BAA6B;MAC9B,OAAON,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAAC,EAAE;QAAEO,qBAAqB,EAAEN,MAAM,CAACO,gBAAgB,CAACR;MAAM,CAAC,CAAC;IAC5G,KAAK,6BAA6B;MAC9B,OAAOjC,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAAC,EAAE;QAAEO,qBAAqB,EAAEN,MAAM,CAACO,gBAAgB,CAACR,KAAK;QAAES,SAAS,EAAE1C,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAACS,SAAS,CAAC,EAAE;UAAEC,cAAc,EAAET,MAAM,CAACO,gBAAgB,CAACG;QAAQ,CAAC;MAAE,CAAC,CAAC;IAC/N,KAAK,4CAA4C;IACjD,KAAK,mDAAmD;MACpD,OAAO5C,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAAC,EAAE;QAAEI,aAAa,EAAEP,OAAO,CAACQ,aAAa,CAACO,sBAAsB;QAAEL,qBAAqB,EAAEN,MAAM,CAACO,gBAAgB,CAACR,KAAK;QAAES,SAAS,EAAE1C,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAACS,SAAS,CAAC,EAAE;UAAEC,cAAc,EAAET,MAAM,CAACO,gBAAgB,CAACG;QAAQ,CAAC;MAAE,CAAC,CAAC;IAC5R,KAAK,uCAAuC;IAC5C,KAAK,8CAA8C;MAC/C,OAAO5C,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAAC,EAAE;QAAEI,aAAa,EAAEP,OAAO,CAACQ,aAAa,CAACQ,iBAAiB;QAAEN,qBAAqB,EAAEN,MAAM,CAACO,gBAAgB,CAACR,KAAK;QAAES,SAAS,EAAE1C,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAACS,SAAS,CAAC,EAAE;UAAEC,cAAc,EAAET,MAAM,CAACO,gBAAgB,CAACG;QAAQ,CAAC;MAAE,CAAC,CAAC;IACvR,KAAK,+BAA+B;MAChC,OAAO5C,MAAM,CAACoC,MAAM,CAACpC,MAAM,CAACoC,MAAM,CAAC,CAAC,CAAC,EAAEH,KAAK,CAAC,EAAE;QAAEO,qBAAqB,EAAEN,MAAM,CAACO,gBAAgB,CAACR;MAAM,CAAC,CAAC;IAC5G;MACI,OAAOA,KAAK;EAAC;AAEzB,CAAC;AACDR,OAAO,CAACC,OAAO,GAAGA,OAAO;AACzB,IAAMqB,sBAAsB,GAAG,SAAzBA,sBAAsB,OAA8Dd,KAAK,EAAEe,QAAQ,EAAK;EAAA,IAA5EC,MAAM,QAANA,MAAM;IAAEC,gBAAgB,QAAhBA,gBAAgB;IAAEC,UAAU,QAAVA,UAAU;IAAEC,aAAa,QAAbA,aAAa;EACjF,YAAkC,CAAC,CAAC,EAAEpB,gBAAgB,CAACqB,OAAO,EAAEJ,MAAM,EAAEhB,KAAK,EAAEe,QAAQ,CAAC;IAAhFM,qBAAqB,SAArBA,qBAAqB;EAC7B,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,OAAO;IAAA,IAAEC,GAAG,uEAAG,IAAI;IAAA,OAAK1B,QAAQ,CAACsB,OAAO,CAACK,KAAK,oCAA6BF,OAAO,GAAIC,GAAG,CAAC;EAAA;EAC5G,IAAQE,wBAAwB,GAAK1B,KAAK,CAAlC0B,wBAAwB;EAChC,IAAMC,aAAa,GAAG,SAAhBA,aAAa;IAAA,OAAU;MACzBzB,IAAI,EAAE;IACV,CAAC;EAAA,CAAC;EACF,IAAM0B,eAAe,GAAG,SAAlBA,eAAe;IAAA,OAAU;MAC3B1B,IAAI,EAAE,6BAA6B;MACnCM,gBAAgB,EAAE;QAAER,KAAK,EAAEH,OAAO,CAACgC,mBAAmB,CAACC,cAAc;QAAEnB,OAAO,EAAEtC;MAAU;IAC9F,CAAC;EAAA,CAAC;EACF,IAAM0D,eAAe,GAAG,SAAlBA,eAAe,CAAIC,MAAM;IAAA,OAAM;MACjC9B,IAAI,EAAE,6BAA6B;MACnCM,gBAAgB,EAAEwB;IACtB,CAAC;EAAA,CAAC;EACF,IAAMC,4BAA4B,GAAG,SAA/BA,4BAA4B,CAAID,MAAM;IAAA,OAAM;MAC9C9B,IAAI,EAAE,4CAA4C;MAClDM,gBAAgB,EAAEwB;IACtB,CAAC;EAAA,CAAC;EACF,IAAME,kCAAkC,GAAG,SAArCA,kCAAkC,CAAIF,MAAM;IAAA,OAAM;MACpD9B,IAAI,EAAE,mDAAmD;MACzDM,gBAAgB,EAAEwB;IACtB,CAAC;EAAA,CAAC;EACF,IAAMG,uBAAuB,GAAG,SAA1BA,uBAAuB,CAAIH,MAAM;IAAA,OAAM;MACzC9B,IAAI,EAAE,uCAAuC;MAC7CM,gBAAgB,EAAEwB;IACtB,CAAC;EAAA,CAAC;EACF,IAAMI,6BAA6B,GAAG,SAAhCA,6BAA6B,CAAIJ,MAAM;IAAA,OAAM;MAC/C9B,IAAI,EAAE,8CAA8C;MACpDM,gBAAgB,EAAEwB;IACtB,CAAC;EAAA,CAAC;EACF,IAAMK,sBAAsB,GAAG,SAAzBA,sBAAsB,CAAIL,MAAM;IAAA,OAAM;MACxC9B,IAAI,EAAE,+BAA+B;MACrCM,gBAAgB,EAAEwB;IACtB,CAAC;EAAA,CAAC;EACF,IAAMM,SAAS,GAAG,SAAZA,SAAS,CAAI/B,qBAAqB,EAAK;IAAA;IACzC,IAAMgC,OAAO,6CACR1C,OAAO,CAACgC,mBAAmB,CAACW,SAAS,EAAG;MAAA,OAAMT,eAAe,CAACxB,qBAAqB,CAAC;IAAA,8BACpFV,OAAO,CAACgC,mBAAmB,CAACY,MAAM,EAAG;MAAA,OAAMV,eAAe,CAACxB,qBAAqB,CAAC;IAAA,8BACjFV,OAAO,CAACgC,mBAAmB,CAACa,cAAc,EAAG;MAAA,OAAMX,eAAe,CAACxB,qBAAqB,CAAC;IAAA,8BACzFV,OAAO,CAACgC,mBAAmB,CAACc,yBAAyB,EAAG;MAAA,OAAMZ,eAAe,CAACxB,qBAAqB,CAAC;IAAA,8BACpGV,OAAO,CAACgC,mBAAmB,CAACe,6BAA6B,EAAG;MAAA,OAAMV,kCAAkC,CAAC3B,qBAAqB,CAAC;IAAA,8BAC3HV,OAAO,CAACgC,mBAAmB,CAACgB,wBAAwB,EAAG;MAAA,OAAMT,6BAA6B,CAAC7B,qBAAqB,CAAC;IAAA,8BACjHV,OAAO,CAACgC,mBAAmB,CAAChB,iBAAiB,EAAG;MAAA,OAAMsB,uBAAuB,CAAC5B,qBAAqB,CAAC;IAAA,8BACpGV,OAAO,CAACgC,mBAAmB,CAACjB,sBAAsB,EAAG;MAAA,OAAMqB,4BAA4B,CAAC1B,qBAAqB,CAAC;IAAA,8BAC9GV,OAAO,CAACgC,mBAAmB,CAACiB,aAAa,EAAG;MAAA,OAAMT,sBAAsB,CAAC9B,qBAAqB,CAAC;IAAA,aACnG;IACD,OAAOgC,OAAO,CAAChC,qBAAqB,CAACP,KAAK,CAAC;EAC/C,CAAC;EACD;AACJ;AACA;AACA;EACI,IAAM+C,wBAAwB;IAAA,uEAAG;MAAA;MAAA;QAAA;UAAA;YAAA;cACvBC,aAAa,GAAG3B,qBAAqB,EAAE;cAC7CC,QAAQ,CAAC,+BAA+B,EAAE0B,aAAa,CAAC;cACxDjC,QAAQ,CAACY,aAAa,EAAE,CAAC;cAAC;cAAA;cAAA,OAEDV,gBAAgB,EAAE,CAACgC,8BAA8B,CAACD,aAAa,CAACE,SAAS,CAAC;YAAA;cAAzFlB,MAAM;cACZV,QAAQ,CAAC,oCAAoC,EAAEzB,OAAO,CAACgC,mBAAmB,CAACG,MAAM,CAAChC,KAAK,CAAC,CAAC;cACnFC,MAAM,GAAGqC,SAAS,CAACN,MAAM,CAAC;cAAA,IAC3B/B,MAAM;gBAAA;gBAAA;cAAA;cACPH,QAAQ,CAACsB,OAAO,CAAC+B,KAAK,CAAC,6DAA6D,EAAE;gBAAEnB,MAAM,EAANA;cAAO,CAAC,CAAC;cACjGjB,QAAQ,CAACa,eAAe,EAAE,CAAC;cAAC;YAAA;cAGhCb,QAAQ,CAACd,MAAM,EAAE,CAAC;cAAC;cAAA;YAAA;cAAA;cAAA;cAGnBH,QAAQ,CAACsB,OAAO,CAAC+B,KAAK,CAAC,mCAAmC,cAAQ;cAClEpC,QAAQ,CAACa,eAAe,EAAE,CAAC;cAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAGnC;IAAA,gBApBKmB,wBAAwB;MAAA;IAAA;EAAA,GAoB7B;EACD,IAAMK,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAIC,aAAa,EAAK;IACxC,IAAMC,GAAG,GAAG,CAAC,CAAC,EAAE5D,OAAO,CAAC6D,MAAM,GAAG;IACjC;IACA,IAAI,CAAC3D,CAAC,CAAC4D,MAAM,CAACH,aAAa,EAAEC,GAAG,CAACG,OAAO,CAAC,EAAE;MACvCH,GAAG,CAACG,OAAO,GAAGJ,aAAa;IAC/B;IACA,OAAOC,GAAG,CAACG,OAAO;EACtB,CAAC;EACD,CAAC,CAAC,EAAE/D,OAAO,CAACgE,SAAS,EAAE,YAAM;IACzB5D,QAAQ,CAACsB,OAAO,CAACK,KAAK,CAAC,kFAAkF,EAAEN,aAAa,CAACwC,mCAAmC,CAAC;IAC7J,IAAIxC,aAAa,CAACwC,mCAAmC,EAAE;MACnD;MACAZ,wBAAwB,EAAE;IAC9B;EACJ,CAAC,EAAE,CAACrB,wBAAwB,EAAE0B,gBAAgB,CAAClC,UAAU,CAAC,EAAEC,aAAa,CAACwC,mCAAmC,CAAC,CAAC;EAC/G,OAAO;IAAEZ,wBAAwB,EAAxBA;EAAyB,CAAC;AACvC,CAAC;AACDvD,OAAO,CAAC4B,OAAO,GAAGN,sBAAsB"},"metadata":{},"sourceType":"script"}