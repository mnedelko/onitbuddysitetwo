{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import styled from'styled-components';import{useEffect,useState}from'react';import Button from'@material-ui/core/Button';import{CircularProgress}from'@material-ui/core';import{GatewayStatus,useGateway}from'@civic/solana-gateway-react';import{jsx as _jsx}from\"react/jsx-runtime\";export var CTAButton=styled(Button)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: block !important;\\n  margin: 0 auto !important;\\n  background-color: var(--primary-color3) !important;\\n  border: 1px solid !important;\\n  border-color: var(--primary-color3) !important;\\n  color: var(--title-text-color) !important;\\n  min-width: 200px !important;\\n  font-size: 1em !important;\\n\"])));export var MintButton=function MintButton(_ref){var onMint=_ref.onMint,candyMachine=_ref.candyMachine,isMinting=_ref.isMinting,isEnded=_ref.isEnded,isActive=_ref.isActive,isSoldOut=_ref.isSoldOut;var _useGateway=useGateway(),requestGatewayToken=_useGateway.requestGatewayToken,gatewayStatus=_useGateway.gatewayStatus;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),clicked=_useState2[0],setClicked=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isVerifying=_useState4[0],setIsVerifying=_useState4[1];useEffect(function(){setIsVerifying(false);if(gatewayStatus===GatewayStatus.COLLECTING_USER_INFORMATION&&clicked){// when user approves wallet verification txn\nsetIsVerifying(true);}else if(gatewayStatus===GatewayStatus.ACTIVE&&clicked){console.log('Verified human, now minting...');onMint();setClicked(false);}},[gatewayStatus,clicked,setClicked,onMint]);return/*#__PURE__*/_jsx(CTAButton,{disabled:clicked||(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.isSoldOut)||isSoldOut||isMinting||isEnded||!isActive||isVerifying,onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(isActive&&candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.gatekeeper&&gatewayStatus!==GatewayStatus.ACTIVE)){_context.next=7;break;}console.log('Requesting gateway token');setClicked(true);_context.next=5;return requestGatewayToken();case 5:_context.next=10;break;case 7:console.log('Minting...');_context.next=10;return onMint();case 10:case\"end\":return _context.stop();}}},_callee);})),variant:\"contained\",children:!candyMachine?\"CONNECTING...\":candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isSoldOut||isSoldOut?'SOLD OUT':isActive?isVerifying?'VERIFYING...':isMinting||clicked?/*#__PURE__*/_jsx(CircularProgress,{}):\"MINT\":isEnded?\"ENDED\":candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.goLiveDate?\"SOON\":\"UNAVAILABLE\"});};","map":{"version":3,"names":["styled","useEffect","useState","Button","CircularProgress","GatewayStatus","useGateway","CTAButton","MintButton","onMint","candyMachine","isMinting","isEnded","isActive","isSoldOut","requestGatewayToken","gatewayStatus","clicked","setClicked","isVerifying","setIsVerifying","COLLECTING_USER_INFORMATION","ACTIVE","console","log","state","gatekeeper","goLiveDate"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/src/MintButton.tsx"],"sourcesContent":["import styled from 'styled-components';\nimport {useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport {CircularProgress} from '@material-ui/core';\nimport {GatewayStatus, useGateway} from '@civic/solana-gateway-react';\nimport {CandyMachineAccount} from './candy-machine';\n\n\nexport const CTAButton = styled(Button)`\n  display: block !important;\n  margin: 0 auto !important;\n  background-color: var(--primary-color3) !important;\n  border: 1px solid !important;\n  border-color: var(--primary-color3) !important;\n  color: var(--title-text-color) !important;\n  min-width: 200px !important;\n  font-size: 1em !important;\n`;\n\nexport const MintButton = ({\n                               onMint,\n                               candyMachine,\n                               isMinting,\n                               isEnded,\n                               isActive,\n                               isSoldOut\n                           }: {\n    onMint: () => Promise<void>;\n    candyMachine: CandyMachineAccount | undefined;\n    isMinting: boolean;\n    isEnded: boolean;\n    isActive: boolean;\n    isSoldOut: boolean;\n}) => {\n    const {requestGatewayToken, gatewayStatus} = useGateway();\n    const [clicked, setClicked] = useState(false);\n    const [isVerifying, setIsVerifying] = useState(false);\n\n    useEffect(() => {\n        setIsVerifying(false);\n        if (gatewayStatus === GatewayStatus.COLLECTING_USER_INFORMATION && clicked) {\n            // when user approves wallet verification txn\n            setIsVerifying(true);\n        } else if (gatewayStatus === GatewayStatus.ACTIVE && clicked) {\n            console.log('Verified human, now minting...');\n            onMint();\n            setClicked(false);\n        }\n    }, [gatewayStatus, clicked, setClicked, onMint]);\n\n    return (\n        <CTAButton\n            disabled={\n                clicked ||\n                candyMachine?.state.isSoldOut ||\n                isSoldOut ||\n                isMinting ||\n                isEnded ||\n                !isActive ||\n                isVerifying\n            }\n            onClick={async () => {\n                if (isActive && candyMachine?.state.gatekeeper && gatewayStatus !== GatewayStatus.ACTIVE) {\n                    console.log('Requesting gateway token');\n                    setClicked(true);\n                    await requestGatewayToken();\n                } else {\n                    console.log('Minting...');\n                    await onMint();\n                }\n            }}\n            variant=\"contained\"\n        >\n            {!candyMachine ? (\n                \"CONNECTING...\"\n            ) : candyMachine?.state.isSoldOut || isSoldOut ? (\n                'SOLD OUT'\n            ) : isActive ? (\n                isVerifying ? 'VERIFYING...' :\n                    isMinting || clicked ? (\n                        <CircularProgress/>\n                    ) : (\n                        \"MINT\"\n                    )\n            ) : isEnded ? \"ENDED\" : (candyMachine?.state.goLiveDate ? (\n                \"SOON\"\n            ) : (\n                \"UNAVAILABLE\"\n            ))}\n        </CTAButton>\n    );\n};\n"],"mappings":"4xBAAA,MAAOA,OAAM,KAAM,mBAAmB,CACtC,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CACzC,MAAOC,OAAM,KAAM,0BAA0B,CAC7C,OAAQC,gBAAgB,KAAO,mBAAmB,CAClD,OAAQC,aAAa,CAAEC,UAAU,KAAO,6BAA6B,CAAC,2CAItE,MAAO,IAAMC,UAAS,CAAGP,MAAM,CAACG,MAAM,CAAC,sXAStC,CAED,MAAO,IAAMK,WAAU,CAAG,QAAbA,WAAU,MAcjB,IAbyBC,OAAM,MAANA,MAAM,CACNC,YAAY,MAAZA,YAAY,CACZC,SAAS,MAATA,SAAS,CACTC,OAAO,MAAPA,OAAO,CACPC,QAAQ,MAARA,QAAQ,CACRC,SAAS,MAATA,SAAS,CASpC,gBAA6CR,UAAU,EAAE,CAAlDS,mBAAmB,aAAnBA,mBAAmB,CAAEC,aAAa,aAAbA,aAAa,CACzC,cAA8Bd,QAAQ,CAAC,KAAK,CAAC,wCAAtCe,OAAO,eAAEC,UAAU,eAC1B,eAAsChB,QAAQ,CAAC,KAAK,CAAC,yCAA9CiB,WAAW,eAAEC,cAAc,eAElCnB,SAAS,CAAC,UAAM,CACZmB,cAAc,CAAC,KAAK,CAAC,CACrB,GAAIJ,aAAa,GAAKX,aAAa,CAACgB,2BAA2B,EAAIJ,OAAO,CAAE,CACxE;AACAG,cAAc,CAAC,IAAI,CAAC,CACxB,CAAC,IAAM,IAAIJ,aAAa,GAAKX,aAAa,CAACiB,MAAM,EAAIL,OAAO,CAAE,CAC1DM,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC7Cf,MAAM,EAAE,CACRS,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAAE,CAACF,aAAa,CAAEC,OAAO,CAAEC,UAAU,CAAET,MAAM,CAAC,CAAC,CAEhD,mBACI,KAAC,SAAS,EACN,QAAQ,CACJQ,OAAO,GACPP,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEe,KAAK,CAACX,SAAS,GAC7BA,SAAS,EACTH,SAAS,EACTC,OAAO,EACP,CAACC,QAAQ,EACTM,WACH,CACD,OAAO,wEAAE,0IACDN,QAAQ,EAAIH,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEe,KAAK,CAACC,UAAU,EAAIV,aAAa,GAAKX,aAAa,CAACiB,MAAM,0BACpFC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvCN,UAAU,CAAC,IAAI,CAAC,CAAC,sBACXH,oBAAmB,EAAE,sCAE3BQ,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC,CAAC,uBACpBf,OAAM,EAAE,wDAErB,EAAC,CACF,OAAO,CAAC,WAAW,UAElB,CAACC,YAAY,CACV,eAAe,CACfA,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEe,KAAK,CAACX,SAAS,EAAIA,SAAS,CAC1C,UAAU,CACVD,QAAQ,CACRM,WAAW,CAAG,cAAc,CACxBR,SAAS,EAAIM,OAAO,cAChB,KAAC,gBAAgB,IAAE,CAEnB,MACH,CACLL,OAAO,CAAG,OAAO,CAAIF,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEe,KAAK,CAACE,UAAU,CACnD,MAAM,CAEN,aACF,EACM,CAEpB,CAAC"},"metadata":{},"sourceType":"module"}