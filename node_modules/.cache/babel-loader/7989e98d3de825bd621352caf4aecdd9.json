{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useConnection = exports.SolanaConnectionProvider = exports.getSolanaConnection = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\n// @ts-ignore\nvar react_1 = __importStar(require(\"react\"));\nvar common_gateway_react_1 = require(\"@civic/common-gateway-react\");\nvar web3_js_1 = require(\"@solana/web3.js\");\nvar R = __importStar(require(\"ramda\"));\nvar ConnectionContext = react_1.default.createContext(null);\nexports.getSolanaConnection = R.memoizeWith(R.identity, function (clusterUrl) {\n  common_gateway_react_1.logger.debug('new solana connection created using clusterUrl', clusterUrl);\n  return new web3_js_1.Connection(clusterUrl, 'processed');\n});\nfunction SolanaConnectionProvider(_ref) {\n  var _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    endpoint = _ref.endpoint;\n  var connection = (0, react_1.useMemo)(function () {\n    return (0, exports.getSolanaConnection)(endpoint);\n  }, [endpoint]);\n  // The websocket library solana/web3.js uses closes its websocket connection when the subscription list\n  // is empty after opening its first time, preventing subsequent subscriptions from receiving responses.\n  // This is a hack to prevent the list from ever getting empty\n  (0, react_1.useEffect)(function () {\n    var id = connection.onAccountChange(web3_js_1.Keypair.generate().publicKey, function () {});\n    return function () {\n      connection.removeAccountChangeListener(id);\n    };\n  }, [connection]);\n  (0, react_1.useEffect)(function () {\n    var id = connection.onSlotChange(function () {\n      return null;\n    });\n    return function () {\n      connection.removeSlotChangeListener(id);\n    };\n  }, [connection]);\n  return (0, jsx_runtime_1.jsx)(ConnectionContext.Provider, Object.assign({\n    value: {\n      endpoint: endpoint,\n      connection: connection\n    }\n  }, {\n    children: children\n  }));\n}\nexports.SolanaConnectionProvider = SolanaConnectionProvider;\nfunction useConnection() {\n  var context = (0, react_1.useContext)(ConnectionContext);\n  if (!context) {\n    throw new Error('Missing connection context');\n  }\n  return context.connection;\n}\nexports.useConnection = useConnection;","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","useConnection","SolanaConnectionProvider","getSolanaConnection","jsx_runtime_1","require","react_1","common_gateway_react_1","web3_js_1","R","ConnectionContext","default","createContext","memoizeWith","identity","clusterUrl","logger","debug","Connection","children","endpoint","connection","useMemo","useEffect","id","onAccountChange","Keypair","generate","publicKey","removeAccountChangeListener","onSlotChange","removeSlotChangeListener","jsx","Provider","assign","context","useContext","Error"],"sources":["/Users/mnedelko/Library/Mobile Documents/com~apple~CloudDocs/Documents/comparativesite/onitbuddyprod/node_modules/@civic/solana-gateway-react/dist/esm/connection.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useConnection = exports.SolanaConnectionProvider = exports.getSolanaConnection = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\n// @ts-ignore\nconst react_1 = __importStar(require(\"react\"));\nconst common_gateway_react_1 = require(\"@civic/common-gateway-react\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst R = __importStar(require(\"ramda\"));\nconst ConnectionContext = react_1.default.createContext(null);\nexports.getSolanaConnection = R.memoizeWith(R.identity, (clusterUrl) => {\n    common_gateway_react_1.logger.debug('new solana connection created using clusterUrl', clusterUrl);\n    return new web3_js_1.Connection(clusterUrl, 'processed');\n});\nfunction SolanaConnectionProvider({ children = null, endpoint, }) {\n    const connection = (0, react_1.useMemo)(() => (0, exports.getSolanaConnection)(endpoint), [endpoint]);\n    // The websocket library solana/web3.js uses closes its websocket connection when the subscription list\n    // is empty after opening its first time, preventing subsequent subscriptions from receiving responses.\n    // This is a hack to prevent the list from ever getting empty\n    (0, react_1.useEffect)(() => {\n        const id = connection.onAccountChange(web3_js_1.Keypair.generate().publicKey, () => { });\n        return () => {\n            connection.removeAccountChangeListener(id);\n        };\n    }, [connection]);\n    (0, react_1.useEffect)(() => {\n        const id = connection.onSlotChange(() => null);\n        return () => {\n            connection.removeSlotChangeListener(id);\n        };\n    }, [connection]);\n    return ((0, jsx_runtime_1.jsx)(ConnectionContext.Provider, Object.assign({ value: {\n            endpoint,\n            connection,\n        } }, { children: children })));\n}\nexports.SolanaConnectionProvider = SolanaConnectionProvider;\nfunction useConnection() {\n    const context = (0, react_1.useContext)(ConnectionContext);\n    if (!context) {\n        throw new Error('Missing connection context');\n    }\n    return context.connection;\n}\nexports.useConnection = useConnection;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}